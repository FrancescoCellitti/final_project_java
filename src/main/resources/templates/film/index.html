<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/navbar :: head('Film | Elenco')}"></head>
<body class="nf-body">
  <header th:replace="~{fragments/navbar :: navbar}"></header>

  <main class="nf-container">
    <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
      <h1 class="nf-title">Elenco Film</h1>
      <a class="nf-btn nf-btn-danger" th:href="@{/films/add}">+ Crea nuovo</a>
    </div>

    <div th:if="${#lists.isEmpty(films)}" class="nf-empty">
      Nessun film presente.
    </div>

    <div th:if="${!#lists.isEmpty(films)}" class="nf-table-wrap">
      <table class="nf-table">
        <thead>
          <tr>
            <th>Titolo</th>
            <th>Durata</th>
            <th>Anno</th>
            <th>Regista</th>
            <th>Categorie</th>
            <th>Azioni</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="f : ${films}">
            <td th:text="${f.title}">Titolo</td>
            <td th:text="${f.duration_time + ' min'}">0 min</td>
            <td th:text="${f.release_year}">Anno</td>
            <td th:text="${f.director != null ? f.director.name + ' ' + f.director.surname : 'â€”'}">Regista</td>
            <td>
              <span th:each="c : ${f.categories}" th:text="${c.title}"
                    style="margin-right:6px;"></span>
            </td>
            <td>
              <a class="nf-btn nf-btn-secondary" th:href="@{'/films/update/' + ${f.id}}">Modifica</a>
              <form th:action="@{'/films/delete/' + ${f.id}}" method="post" style="display:inline;">
                <button type="submit" class="nf-btn nf-btn-danger"
                  onclick="return confirm('Eliminare questo film?')">Elimina</button>
              </form>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>
</body>
</html>